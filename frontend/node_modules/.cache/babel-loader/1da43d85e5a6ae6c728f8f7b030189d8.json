{"ast":null,"code":"import _regeneratorRuntime from \"/Users/sameergupta/Desktop/final_repo/ecommerce-mern/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/sameergupta/Desktop/final_repo/ecommerce-mern/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/sameergupta/Desktop/final_repo/ecommerce-mern/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/sameergupta/Desktop/final_repo/ecommerce-mern/frontend/src/screens/OrderScreen.js\";\n\nimport React, { useEffect, useState } from 'react';\nimport moment from 'moment';\nimport { Button, Col, Row, ListGroup, Image, Card, ListGroupItem } from 'react-bootstrap';\nimport { ORDER_PAY_RESET } from '../constants/orderConstants';\nimport { PayPalButton } from 'react-paypal-button-v2';\nimport { Link, useNavigate, useParams } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getOrderDetails, payOrder } from '../actions/orderAction';\nimport Message from '../components/Message';\nimport Loader from '../components/Loader';\nimport axios from 'axios';\nimport TestRazorScreen from './TestRazorScreen';\n\nvar OrderScreen = function OrderScreen() {\n  var _useParams = useParams(),\n      id = _useParams.id;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      sdkReady = _useState2[0],\n      setSdkReady = _useState2[1];\n\n  var orderId = id;\n  var orderPay = useSelector(function (state) {\n    return state.orderPay;\n  });\n  var loadingPay = orderPay.loading,\n      successPay = orderPay.success;\n  var dispatch = useDispatch();\n  var orderDetails = useSelector(function (state) {\n    return state.orderDetails;\n  });\n  var order = orderDetails.order,\n      loading = orderDetails.loading,\n      error = orderDetails.error;\n  var i = 0; //razor\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      orderAmount = _useState4[0],\n      setOrderAmount = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      Orders = _useState6[0],\n      setOrders = _useState6[1];\n\n  var fetchOrders = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _yield$axios$get, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return axios.get('/api/list-orders');\n\n            case 2:\n              _yield$axios$get = _context.sent;\n              data = _yield$axios$get.data;\n              setOrders(data);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetchOrders() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    fetchOrders();\n  }, []); //\n\n  var successPaymentHandler = function successPaymentHandler(paymentResult) {\n    dispatch(payOrder(orderId, paymentResult));\n  };\n\n  useEffect(function () {\n    var addPaypalScript = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _yield$axios$get2, clientId, script;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return axios.get('/api/config/paypal');\n\n              case 2:\n                _yield$axios$get2 = _context2.sent;\n                clientId = _yield$axios$get2.data;\n                script = document.createElement('script');\n                script.type = 'text/javascript';\n                script.src = \"https://www.paypal.com/sdk/js?client-id=\".concat(clientId);\n                script.async = true;\n\n                script.onload = function () {\n                  setSdkReady(true);\n                };\n\n                document.body.appendChild(script);\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function addPaypalScript() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    if (!order || successPay) {\n      dispatch(getOrderDetails(orderId));\n      dispatch({\n        type: ORDER_PAY_RESET\n      });\n    } else if (!order.isPaid) {\n      if (!window.paypal) {\n        addPaypalScript();\n      } else {\n        setSdkReady(true);\n      }\n    }\n  }, [dispatch, orderId, order, successPay]); //razor\n\n  function loadRazorPay() {\n    var script = document.createElement('script');\n    script.src = 'https://checkout.razorpay.com/v1/checkout.js';\n\n    script.onerror = function () {\n      alert('RazorPay SDK failed to load. Are you online ? ');\n    };\n\n    script.onload = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var result, _result$data, amount, order_id, currency, _yield$axios$get3, razorpayKey, options, paymentObject;\n\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              console.log(order.totalPrice);\n              _context4.prev = 1;\n              _context4.next = 4;\n              return axios.post('/api/create-razorpay-order', {\n                amount: order.totalPrice\n              });\n\n            case 4:\n              result = _context4.sent;\n              _result$data = result.data, amount = _result$data.amount, order_id = _result$data.id, currency = _result$data.currency;\n              _context4.next = 8;\n              return axios.get('/api/config/razorpay');\n\n            case 8:\n              _yield$axios$get3 = _context4.sent;\n              razorpayKey = _yield$axios$get3.data.key;\n              options = {\n                key: razorpayKey,\n                amount: amount.toString(),\n                currency: currency,\n                name: 'example name',\n                description: 'example transaction',\n                order_id: order_id,\n                handler: function () {\n                  var _handler = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(response) {\n                    var result;\n                    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                      while (1) {\n                        switch (_context3.prev = _context3.next) {\n                          case 0:\n                            _context3.next = 2;\n                            return axios.post('/api/pay-order', {\n                              amount: amount,\n                              razorpayPaymentId: response.razorpay_payment_id,\n                              razorpayOrderId: response.razorpay_order_id,\n                              razorpaySignature: response.razorpay_signature\n                            });\n\n                          case 2:\n                            result = _context3.sent;\n                            alert(result.data.msg);\n                            fetchOrders();\n\n                          case 5:\n                          case \"end\":\n                            return _context3.stop();\n                        }\n                      }\n                    }, _callee3);\n                  }));\n\n                  function handler(_x) {\n                    return _handler.apply(this, arguments);\n                  }\n\n                  return handler;\n                }(),\n                prefill: {\n                  name: \"example name\",\n                  email: \"example@example.com\",\n                  contact: \"1111111\"\n                },\n                note: {\n                  address: 'example address'\n                },\n                theme: {\n                  color: '#80c0f0'\n                }\n              };\n              paymentObject = new window.Razorpay(options);\n              paymentObject.open();\n              _context4.next = 18;\n              break;\n\n            case 15:\n              _context4.prev = 15;\n              _context4.t0 = _context4[\"catch\"](1);\n              alert(_context4.t0);\n\n            case 18:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[1, 15]]);\n    }));\n    document.body.appendChild(script);\n  } //\n\n\n  return loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 15\n    }\n  }) : error ? /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 36\n    }\n  }, error) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, \"Order \", order._id), /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    variant: \"flush\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 21\n    }\n  }, \"Shipping\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 24\n    }\n  }, \"Name : \"), order.user.name), /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 24\n    }\n  }, \"Email : \"), order.user.email), /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 25\n    }\n  }, \"Address : \"), order.shippingAddress.address, \", \", order.shippingAddress.city, \", \", order.shippingAddress.postalcode, \", \", order.shippingAddress.country), order.isDeliverd ? /*#__PURE__*/React.createElement(Message, {\n    variant: \"success\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 25\n    }\n  }, \"Deliverd on \", order.paidAt) : /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 28\n    }\n  }, \"Not Deliverd\")), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 21\n    }\n  }, \"Payment Method\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 25\n    }\n  }, \"Method : \"), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 25\n    }\n  }, order.paymentMethod)), order.isPaid ? /*#__PURE__*/React.createElement(Message, {\n    variant: \"success\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 38\n    }\n  }, \"Paid On \", moment(order.paidAt).format(\"dddd, MMM DD @ HH:mm a\")) : /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 141\n    }\n  }, \"Order Not Paid\")), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 21\n    }\n  }, \"Order Items\"), /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 21\n    }\n  }, order.orderItems.map(function (item, index) {\n    return /*#__PURE__*/React.createElement(ListGroup.Item, {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Image, {\n      src: item.image,\n      alt: item.name,\n      fluid: true,\n      rounded: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 31\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/product/\".concat(item.product),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 29\n      }\n    }, item.name)), /*#__PURE__*/React.createElement(Col, {\n      md: 4,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 29\n      }\n    }, item.qty, \" X $\", item.price, \" = $\", item.price * item.qty)));\n  })))), /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 19\n    }\n  }, \"Items\"), /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 19\n    }\n  }, \"$\", order.itemsPrice)), /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 19\n    }\n  }, \"shipping\"), /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 19\n    }\n  }, \"$\", order.shippingPrice)), /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 19\n    }\n  }, \"Tax\"), /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 19\n    }\n  }, \"$\", order.taxPrice)), /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 19\n    }\n  }, \"Total\"), /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 19\n    }\n  }, \"$\", order.totalPrice))), order.paymentMethod === \"Paypal\" ? !order.isPaid && /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 36\n    }\n  }, loadingPay && /*#__PURE__*/React.createElement(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 30\n    }\n  }), !sdkReady ? /*#__PURE__*/React.createElement(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 29\n    }\n  }) : /*#__PURE__*/React.createElement(PayPalButton, {\n    amount: order.totalPrice,\n    onSuccess: successPaymentHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 44\n    }\n  })) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n    disabled: loading,\n    onClick: loadRazorPay,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }\n  }, \"Pay Now\")))));\n};\n\nexport default OrderScreen;","map":{"version":3,"names":["React","useEffect","useState","moment","Button","Col","Row","ListGroup","Image","Card","ListGroupItem","ORDER_PAY_RESET","PayPalButton","Link","useNavigate","useParams","useDispatch","useSelector","getOrderDetails","payOrder","Message","Loader","axios","TestRazorScreen","OrderScreen","id","sdkReady","setSdkReady","orderId","orderPay","state","loadingPay","loading","successPay","success","dispatch","orderDetails","order","error","i","orderAmount","setOrderAmount","Orders","setOrders","fetchOrders","get","data","successPaymentHandler","paymentResult","addPaypalScript","clientId","script","document","createElement","type","src","async","onload","body","appendChild","isPaid","window","paypal","loadRazorPay","onerror","alert","console","log","totalPrice","post","amount","result","order_id","currency","razorpayKey","key","options","toString","name","description","handler","response","razorpayPaymentId","razorpay_payment_id","razorpayOrderId","razorpay_order_id","razorpaySignature","razorpay_signature","msg","prefill","email","contact","note","address","theme","color","paymentObject","Razorpay","open","_id","user","shippingAddress","city","postalcode","country","isDeliverd","paidAt","paymentMethod","format","orderItems","map","item","index","image","product","qty","price","itemsPrice","shippingPrice","taxPrice"],"sources":["/Users/sameergupta/Desktop/final_repo/ecommerce-mern/frontend/src/screens/OrderScreen.js"],"sourcesContent":["import React,{useEffect, useState} from 'react'\nimport moment from 'moment'\nimport {Button, Col, Row , ListGroup, Image, Card, ListGroupItem} from 'react-bootstrap'\nimport { ORDER_PAY_RESET } from '../constants/orderConstants'\nimport {PayPalButton} from 'react-paypal-button-v2'\nimport {Link, useNavigate, useParams} from 'react-router-dom'\nimport {useDispatch, useSelector} from 'react-redux'\nimport {getOrderDetails, payOrder} from '../actions/orderAction'\nimport Message from '../components/Message'\nimport Loader from '../components/Loader'\nimport axios from 'axios'\nimport TestRazorScreen from './TestRazorScreen'\n\nconst OrderScreen = () => {\n    const {id} = useParams();\n    const [sdkReady, setSdkReady] = useState(false)\n    const orderId = id;\n    const orderPay = useSelector(state => state.orderPay)\n    const {loading:loadingPay, success:successPay} = orderPay\n    const dispatch = useDispatch();\n    const orderDetails = useSelector(state => state.orderDetails)\n    const {order, loading,error} = orderDetails\n    let i=0\n    //razor\n    \n    const [orderAmount, setOrderAmount] = useState(0);\n    const [Orders, setOrders] = useState([])\n\n    const fetchOrders = async() => {\n    const {data} = await axios.get('/api/list-orders')\n    setOrders(data);\n  }\n  useEffect(()=>{\n    fetchOrders();\n  },[])\n\n//\n  const successPaymentHandler = (paymentResult) => {\n      dispatch(payOrder(orderId,paymentResult))\n  }\n\n    useEffect(()=>{\n      const addPaypalScript = async() =>{\n        const {data: clientId} = await axios.get('/api/config/paypal')\n        const script = document.createElement('script')\n        script.type = 'text/javascript'\n        script.src = `https://www.paypal.com/sdk/js?client-id=${clientId}`\n        script.async = true\n        script.onload = () => {\n          setSdkReady(true)\n        }\n        document.body.appendChild(script)\n      }\n      if(!order || successPay){\n        dispatch(getOrderDetails(orderId));\n        dispatch({type:ORDER_PAY_RESET})\n      }else if(!order.isPaid){\n        if(!window.paypal){\n          addPaypalScript()\n        }else{\n          setSdkReady(true)\n        }\n      }\n    },[dispatch,orderId,order,successPay])\n    //razor\n    function loadRazorPay() {\n      const script = document.createElement('script');\n      script.src = 'https://checkout.razorpay.com/v1/checkout.js'\n      script.onerror = () =>{\n        alert('RazorPay SDK failed to load. Are you online ? ')\n      }\n      script.onload = async () =>{\n        console.log(order.totalPrice)\n        try {\n          const result = await axios.post('/api/create-razorpay-order', {\n            \n            amount : order.totalPrice,\n          });\n          const {amount, id: order_id, currency } = result.data;\n          const {\n            data: {key: razorpayKey},\n          } = await axios.get('/api/config/razorpay');\n  \n          const options = {\n            key: razorpayKey,\n            amount: amount.toString(),\n            currency: currency,\n            name: 'example name',\n            description: 'example transaction',\n            order_id: order_id,\n            handler: async function (response) {\n              const result = await axios.post('/api/pay-order',{\n                amount: amount,\n                razorpayPaymentId: response.razorpay_payment_id,\n                razorpayOrderId: response.razorpay_order_id,\n                razorpaySignature: response.razorpay_signature,\n              });\n              alert(result.data.msg);\n              fetchOrders();\n            },\n            prefill: {\n              name: \"example name\",\n              email: \"example@example.com\",\n              contact: \"1111111\",\n            }, note: {\n              address: 'example address'\n            },\n            theme:{\n              color: '#80c0f0'\n            }\n  \n          }\n  \n  \n          const paymentObject = new window.Razorpay(options)\n          paymentObject.open()\n        } catch (error) {\n          alert(error);\n        }\n      }\n      document.body.appendChild(script);\n    }\n    //\n\n\n  return (\n    loading ? <Loader /> : error ? <Message variant=\"danger\">{error}</Message> :\n    <>\n        <h2>Order {order._id}</h2>\n        <Row>\n            <Col md={8}>\n                <ListGroup.Item variant='flush'>\n                    <h2>Shipping</h2>\n                    <p><strong>Name : </strong>{order.user.name}</p>\n                    <p><strong>Email : </strong>{order.user.email}</p>\n                    <p>\n                        <strong>Address : </strong>\n                        {order.shippingAddress.address}, {order.shippingAddress.city}, {order.shippingAddress.postalcode}, {order.shippingAddress.country} \n                    </p>\n                    {\n                      order.isDeliverd ? (\n                        <Message variant='success'>Deliverd on {order.paidAt}</Message>\n                      ) : (<Message variant='danger'>Not Deliverd</Message>)\n                    }\n                </ListGroup.Item>\n                <ListGroup.Item >\n                    <h2>Payment Method</h2>\n                    <p>\n                        <strong>Method : </strong>\n                        <strong>{order.paymentMethod}</strong>\n                    </p>\n                    {\n                      order.isPaid ? <Message variant='success'>Paid On {moment(order.paidAt).format(\"dddd, MMM DD @ HH:mm a\")}</Message> : <Message variant='danger'>Order Not Paid</Message>\n                    }\n                </ListGroup.Item>\n                <ListGroup.Item>\n                    <h2>Order Items</h2>\n                    {/* {cartItems.length === 0 ? (<Message variant='danger'>Your Cart is Empty</Message>) :  */}\n                    <ListGroup variant='flush'>\n                      {order.orderItems.map((item, index) =>(\n                        <ListGroup.Item key={index}>\n                          <Row>\n                            <Col md={2}>\n                              <Image src={item.image} alt={item.name}fluid rounded></Image>\n                            </Col>\n                            <Col>\n                            <Link to={`/product/${item.product}`}>{item.name}</Link>\n                            </Col>\n                            <Col md={4}>{item.qty} X ${item.price} = ${(item.price)*(item.qty)}</Col>\n                          </Row>\n                        </ListGroup.Item>\n                      ))}\n                    </ListGroup>\n                </ListGroup.Item>\n                \n            </Col>\n            <Col>\n\n            <ListGroup.Item>\n                <Row>\n                  <Col>Items</Col>\n                  <Col>${order.itemsPrice}</Col>\n                </Row>\n                <Row>\n                  <Col>shipping</Col>\n                  <Col>${order.shippingPrice}</Col>\n                </Row>\n                <Row>\n                  <Col>Tax</Col>\n                  <Col>${order.taxPrice}</Col>\n                </Row>\n                <Row>\n                  <Col>Total</Col>\n                  <Col>${order.totalPrice}</Col>\n                </Row>\n                </ListGroup.Item>\n                {order.paymentMethod === \"Paypal\" ? \n                (!order.isPaid && (<ListGroup.Item>\n              {loadingPay && <Loader />}\n              {!sdkReady ? (<Loader />) : (<PayPalButton  amount={order.totalPrice} onSuccess={successPaymentHandler}/>)}\n            </ListGroup.Item>)) : <>\n      \n      <Button disabled={loading} onClick={loadRazorPay}>Pay Now</Button>\n    </>}\n            \n            </Col>\n        </Row>\n    </>\n  )\n}\n\nexport default OrderScreen\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}