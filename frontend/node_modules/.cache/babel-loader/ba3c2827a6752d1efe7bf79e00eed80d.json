{"ast":null,"code":"import _toConsumableArray from \"/Users/sameergupta/Desktop/final_repo/ecommerce-mern/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/sameergupta/Desktop/final_repo/ecommerce-mern/frontend/src/screens/CartScreen.js\";\n\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useNavigate, useParams, useLocation } from 'react-router-dom';\nimport { Row, Col, ListGroup, Image, Form, Button, Card, ListGroupItem } from 'react-bootstrap';\nimport Message from '../components/Message';\nimport { addToCart, removeFromCart } from '../actions/cartAction';\n\nvar CartScreen = function CartScreen() {\n  var _useParams = useParams(),\n      id = _useParams.id;\n\n  var history = useNavigate();\n  var location = useLocation();\n  var qty = location.search ? Number(location.search.split('=')[1]) : 1;\n  var dispatch = useDispatch();\n  var userLogin = useSelector(function (state) {\n    return state.userLogin;\n  });\n  var userInfo = userLogin.userInfo;\n  var cart = useSelector(function (state) {\n    return state.cart;\n  });\n  var cartItems = cart.cartItems;\n  useEffect(function () {\n    if (id) {\n      dispatch(addToCart(id, qty));\n    }\n  }, [dispatch, id, qty]);\n\n  var removeCartHandler = function removeCartHandler(id) {\n    dispatch(removeFromCart(id));\n  };\n\n  var checkOutHandler = function checkOutHandler() {\n    if (!userInfo) {\n      history('/login');\n    } else {\n      history('/shipping');\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }\n  }, \"Shopping Cart\"), cartItems.length === 0 ? /*#__PURE__*/React.createElement(Message, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 36\n    }\n  }, \"Your Cart is Empty \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 64\n    }\n  }, \"Go Back\")) : /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 105\n    }\n  }, cartItems.map(function (item) {\n    return /*#__PURE__*/React.createElement(ListGroupItem, {\n      key: item.product,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 40\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Image, {\n      src: item.image,\n      alt: item.name,\n      fluid: true,\n      rounded: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      md: 3,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/product/\".concat(item.product),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 33\n      }\n    }, item.name)), /*#__PURE__*/React.createElement(Col, {\n      md: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 29\n      }\n    }, \"$\", item.price), /*#__PURE__*/React.createElement(Col, {\n      md: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      as: \"select\",\n      value: item.qty,\n      onChange: function onChange(e) {\n        return dispatch(addToCart(item.product, Number(e.target.value)));\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 29\n      }\n    }, _toConsumableArray(Array(item.countInStock).keys()).map(function (x) {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: x + 1,\n        value: x + 1,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 80\n        }\n      }, x + 1);\n    }))), /*#__PURE__*/React.createElement(Col, {\n      md: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"button\",\n      variant: \"light\",\n      onClick: function onClick() {\n        return removeCartHandler(item.product);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 33\n      }\n    }, \"remove\"))));\n  }))), /*#__PURE__*/React.createElement(Col, {\n    md: 4,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ListGroupItem, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 25\n    }\n  }, \"Subtotal (\", cartItems.reduce(function (acc, item) {\n    return acc + item.qty;\n  }, 0), \") item(s)\"), \"$\", cartItems.reduce(function (acc, item) {\n    return acc + item.price * item.qty;\n  }, 0).toFixed(2)), /*#__PURE__*/React.createElement(ListGroupItem, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    className: \"btn-block\",\n    disabled: cartItems.length === 0,\n    onClick: checkOutHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 25\n    }\n  }, \"Proceed to CheckOut\"))))), /*#__PURE__*/React.createElement(Col, {\n    md: 2,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default CartScreen;","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","Link","useNavigate","useParams","useLocation","Row","Col","ListGroup","Image","Form","Button","Card","ListGroupItem","Message","addToCart","removeFromCart","CartScreen","id","history","location","qty","search","Number","split","dispatch","userLogin","state","userInfo","cart","cartItems","removeCartHandler","checkOutHandler","length","map","item","product","image","name","price","e","target","value","Array","countInStock","keys","x","reduce","acc","toFixed"],"sources":["/Users/sameergupta/Desktop/final_repo/ecommerce-mern/frontend/src/screens/CartScreen.js"],"sourcesContent":["import React,{useEffect, useState} from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport {Link, useNavigate, useParams,useLocation} from 'react-router-dom'\nimport {Row,Col, ListGroup, Image, Form, Button, Card, ListGroupItem} from 'react-bootstrap'\nimport Message from '../components/Message'\nimport {addToCart,removeFromCart} from '../actions/cartAction'\n\nconst CartScreen = () => {\n    const {id} =  useParams();\n    const history = useNavigate();\n    const location = useLocation();\n    \n    const qty =location.search ? Number(location.search.split('=')[1]): 1\n    const dispatch = useDispatch()\n    const userLogin = useSelector(state=> state.userLogin)\n    const {userInfo} = userLogin\n    const cart = useSelector(state => state.cart)\n    const {cartItems} = cart\n\n    useEffect(()=>{\n        if(id){\n            dispatch(addToCart(id, qty))\n        }\n    },[dispatch, id, qty])\n\n\n    const removeCartHandler = (id) => {\n        dispatch(removeFromCart(id))\n    }\n    const checkOutHandler= () => {\n        \n        if(!userInfo){\n            history('/login')\n        }else{\n            history('/shipping')\n        }\n        \n    }\n  return (\n    <Row>\n        <Col md={8}>\n            <h2>Shopping Cart</h2>\n            {cartItems.length===0? <Message>Your Cart is Empty <Link to='/'>Go Back</Link></Message> : (<ListGroup variant='flush'>\n                {cartItems.map((item)=><ListGroupItem key={item.product}>\n                        <Row>\n                            <Col md={2}>\n                                <Image src={item.image} alt={item.name}fluid rounded></Image>\n                            </Col>\n                            <Col md={3}>\n                                <Link to={`/product/${item.product}`}>{item.name}</Link>\n                            </Col>\n                            <Col md={2}>\n                                ${item.price}\n                            </Col>\n                            <Col md={2}>\n                            <Form.Control as='select' value={item.qty} \n                             onChange={(e)=> dispatch(addToCart(item.product,Number((e.target.value))))  }\n                             \n                             >{\n                                [...Array(item.countInStock).keys()].map(x => (<option key = {x+1} value = {x+1}>{x+1}</option>))}\n                            </Form.Control>\n                            </Col>\n                            <Col md={2}>\n                                <Button type='button' variant='light' onClick={()=> removeCartHandler(item.product)}>\n                                    remove\n                                </Button>\n                            </Col>\n                        </Row>\n                    </ListGroupItem>)}\n\n                    \n            </ListGroup>)}\n        </Col>\n        <Col md={4}>\n            <Card>\n                <ListGroup variant='flush'>\n                    <ListGroupItem>\n                        <h3>Subtotal ({cartItems.reduce((acc,item)=>acc+item.qty, 0)}) item(s)</h3>\n                        ${cartItems.reduce((acc,item)=> acc+(item.price)*(item.qty),0 ).toFixed(2)}\n                    </ListGroupItem>\n                    <ListGroupItem>\n                        <Button type='button' className='btn-block' disabled={cartItems.length === 0}  onClick={checkOutHandler}>\n                            Proceed to CheckOut\n                        </Button>\n                    </ListGroupItem>\n                </ListGroup>\n            </Card>\n        </Col>\n        <Col md={2}>\n\n        </Col>\n    </Row>\n  )\n}\n\nexport default CartScreen\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}