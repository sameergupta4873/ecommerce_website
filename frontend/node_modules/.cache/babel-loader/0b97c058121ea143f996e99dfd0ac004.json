{"ast":null,"code":"import _regeneratorRuntime from \"/Users/sameergupta/Desktop/final_repo/ecommerce-mern/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/sameergupta/Desktop/final_repo/ecommerce-mern/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/sameergupta/Desktop/final_repo/ecommerce-mern/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/sameergupta/Desktop/final_repo/ecommerce-mern/frontend/src/screens/TestRazorScreen.js\";\n\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport OrderScreen from './OrderScreen';\nimport { Button } from 'react-bootstrap';\n\nvar TestRazorScreen = function TestRazorScreen() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      orderAmount = _useState4[0],\n      setOrderAmount = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      OrderScreen = _useState6[0],\n      setOrders = _useState6[1];\n\n  function fetchOrders() {\n    return _fetchOrders.apply(this, arguments);\n  }\n\n  function _fetchOrders() {\n    _fetchOrders = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var _yield$axios$get2, data;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return axios.get('/list-orders');\n\n            case 2:\n              _yield$axios$get2 = _context3.sent;\n              data = _yield$axios$get2.data;\n              setOrders(data);\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return _fetchOrders.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    fetchOrders();\n  }, []);\n\n  function loadRazorPay() {\n    var script = document.createElement('script');\n    script.src = 'https://checkout.razorpay.com/v1/checkout.js';\n\n    script.onerror = function () {\n      alert('RazorPay SDK failed to load. Are you online ? ');\n    };\n\n    script.onload = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var result, _result$data, amount, order_id, currency, _yield$axios$get, razorpayKey, options, paymentObject;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              setLoading(true);\n              _context2.next = 4;\n              return axios.post('/create-order', {\n                amount: orderAmount + '00'\n              });\n\n            case 4:\n              result = _context2.sent;\n              _result$data = result.data, amount = _result$data.amount, order_id = _result$data.id, currency = _result$data.currency;\n              _context2.next = 8;\n              return axios.get('/api/config/razorpay');\n\n            case 8:\n              _yield$axios$get = _context2.sent;\n              razorpayKey = _yield$axios$get.data.key;\n              options = {\n                key: razorpayKey,\n                amount: amount.toString(),\n                currency: currency,\n                name: 'example name',\n                description: 'example transaction',\n                order_id: order_id,\n                handler: function () {\n                  var _handler = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(response) {\n                    var result;\n                    return _regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            _context.next = 2;\n                            return axios.post('/pay-order', {\n                              amount: amount,\n                              razorpayPaymentId: response.razorpay_payment_id,\n                              razorpayOrderId: response.razorpay_order_id,\n                              razorpaySignature: response.razorpay_signature\n                            });\n\n                          case 2:\n                            result = _context.sent;\n                            alert(result.data.msg);\n                            fetchOrders();\n\n                          case 5:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee);\n                  }));\n\n                  function handler(_x) {\n                    return _handler.apply(this, arguments);\n                  }\n\n                  return handler;\n                }(),\n                prefill: {\n                  name: \"example name\",\n                  email: \"example@example.com\",\n                  contact: \"1111111\"\n                },\n                note: {\n                  address: 'example address'\n                },\n                theme: {\n                  color: '#80c0f0'\n                }\n              };\n              setLoading(false);\n              paymentObject = new window.Razorpay(options);\n              paymentObject.open();\n              _context2.next = 20;\n              break;\n\n            case 16:\n              _context2.prev = 16;\n              _context2.t0 = _context2[\"catch\"](0);\n              alert(_context2.t0);\n              setLoading(false);\n\n            case 20:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 16]]);\n    }));\n    document.body.appendChild(script);\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"INR\",\n    type: \"number\",\n    value: orderAmount,\n    onChange: function onChange(e) {\n      return setOrderAmount(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    disabled: loading,\n    onClick: loadRazorPay,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, \"Razorpay\"));\n};\n\nexport default TestRazorScreen;","map":{"version":3,"names":["React","useEffect","useState","axios","OrderScreen","Button","TestRazorScreen","loading","setLoading","orderAmount","setOrderAmount","setOrders","fetchOrders","get","data","loadRazorPay","script","document","createElement","src","onerror","alert","onload","post","amount","result","order_id","id","currency","razorpayKey","key","options","toString","name","description","handler","response","razorpayPaymentId","razorpay_payment_id","razorpayOrderId","razorpay_order_id","razorpaySignature","razorpay_signature","msg","prefill","email","contact","note","address","theme","color","paymentObject","window","Razorpay","open","body","appendChild","e","target","value"],"sources":["/Users/sameergupta/Desktop/final_repo/ecommerce-mern/frontend/src/screens/TestRazorScreen.js"],"sourcesContent":["import React , {useEffect, useState}from 'react'\nimport axios from 'axios'\nimport OrderScreen from './OrderScreen';\nimport { Button } from 'react-bootstrap';\n\n\nconst TestRazorScreen = () => {\n  const [loading, setLoading] = useState(false);\n  const [orderAmount, setOrderAmount] = useState(0);\n  const [OrderScreen, setOrders] = useState([])\n\n  async function fetchOrders(){\n    const {data} = await axios.get('/list-orders')\n    setOrders(data);\n  }\n\n  useEffect(()=>{\n    fetchOrders();\n  },[])\n\n  function loadRazorPay() {\n    const script = document.createElement('script');\n    script.src = 'https://checkout.razorpay.com/v1/checkout.js'\n    script.onerror = () =>{\n      alert('RazorPay SDK failed to load. Are you online ? ')\n    }\n    script.onload = async () =>{\n      try {\n        setLoading(true);\n        const result = await axios.post('/create-order', {\n          amount : orderAmount + '00',\n        });\n        const {amount, id: order_id, currency } = result.data;\n        const {\n          data: {key: razorpayKey},\n        } = await axios.get('/api/config/razorpay');\n\n        const options = {\n          key: razorpayKey,\n          amount: amount.toString(),\n          currency: currency,\n          name: 'example name',\n          description: 'example transaction',\n          order_id: order_id,\n          handler: async function (response) {\n            const result = await axios.post('/pay-order',{\n              amount: amount,\n              razorpayPaymentId: response.razorpay_payment_id,\n              razorpayOrderId: response.razorpay_order_id,\n              razorpaySignature: response.razorpay_signature,\n            });\n            alert(result.data.msg);\n            fetchOrders();\n          },\n          prefill: {\n            name: \"example name\",\n            email: \"example@example.com\",\n            contact: \"1111111\",\n          }, note: {\n            address: 'example address'\n          },\n          theme:{\n            color: '#80c0f0'\n          }\n\n        }\n\n\n        setLoading(false);\n        const paymentObject = new window.Razorpay(options)\n        paymentObject.open()\n      } catch (error) {\n        alert(error);\n        setLoading(false);\n      }\n    }\n    document.body.appendChild(script);\n  }\n\n\n\n  return (\n    <>\n      <input placeholder='INR' type='number' value={orderAmount}\n      onChange={(e)=>setOrderAmount(e.target.value)}\n      ></input>\n      <Button disabled={loading} onClick={loadRazorPay}>Razorpay</Button>\n    </>\n  )\n}\n\nexport default TestRazorScreen\n\n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}